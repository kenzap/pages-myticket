!function(){"use strict";function t(t,e){for(var o=0;o<e.length;o++){var a=e[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,n(a.key),a)}}function e(t,e,o){return(e=n(e))in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function n(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}const o=t=>0===(t=String(t)).length?"":t.replace(/[&<>'"]/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[t]))),a=(t,...e)=>{if(0===(t=String(t)).length)return"";return((t,e,...n)=>{let o=(t,e)=>(e.forEach(((e,n)=>{t=t.replace("%"+(n+1)+"$",e)})),t);return void 0===window.i18n||void 0===window.i18n.state.locale.values[t]?o(t,n):o(e(window.i18n.state.locale.values[t]),n)})(t,(t=>t.replace(/[&<>'"]/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[t])))),...e)},i=()=>{let t=new URLSearchParams(window.location.search);return t.get("sid")?t.get("sid"):""},c=t=>{let e=t+"=",n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let o=n[t];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""};c("kenzap_api_key"),c("locale")&&c("locale"),(()=>{let t=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,e=window.location.hostname+"/"+i()+"/"+c("locale");e!=c("check")&&(t=0,console.log("refresh")),((t,e,n)=>{let o="";if(n){let t=new Date;t.setTime(t.getTime()+24*n*60*60*1e3),o=";expires="+t.toUTCString()}document.cookie=t+"="+(escape(e)||"")+o+";path=/;domain=.kenzap.cloud"})("check",e,5)})(),c("kenzap_token"),i();const r=t=>{if(console.log(t),isNaN(t.code)){let e=t;try{e=JSON.stringify(e)}catch(t){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",i()),n.append("token",c("kenzap_token")),n.append("data",e),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===t.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(t.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(t.reason)};var l,d,s,u=function(t){for(var e=t+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""},p=function(t){var e=new URLSearchParams(window.location.search);return e.get(t)?e.get(t):""},h=(l=function t(n){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e(this,"html",(function(){document.querySelector("#content").insertAdjacentHTML("beforeend",'\n        <section id="'.concat(o(i.data.id),'" class="kZtMlO ').concat(i.data.c.classes?o(i.data.c.classes):"",'" style="').concat(i.data.c.section,";").concat(i.data.borderstyle.value?"--borderStyle:"+i.data.borderstyle.value+"px;":"",'">\n            <div class="container" style="').concat(i.data.c.container,'">\n  \n\n            </div>\n        </section>\n        '))})),e(this,"load",(function(){var t=i;i.state.firstLoad&&(()=>{let t=document.querySelector(".loader");t&&(t.style.display="block")})(),fetch(i.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":u("locale")?u("locale"):"en","Kenzap-Sid":t.data.sid},body:JSON.stringify({query:{order:{type:"verify-order",trans_id:p("id")}}})}).then((function(t){return t.json()})).then((function(t){if(t.success)i.state.response=t,i.render(),i.listeners(),i.state.firstLoad=!1;else{if(401==t.code)return void(document.querySelector("#"+i.data.id+" .container").innerHTML="".concat(a("this order does not exist or already expired")));r(t)}})).catch((function(t){console.error("Error:",t)}))})),e(this,"render",(function(){document.querySelector("#"+i.data.id+" .container").innerHTML='\n\n            <div class="section-page-header">\n                <div class="container">\n                    <h1 class="entry-title">'.concat(a("Download Your Ticket"),'</h1>\n                </div>\n            </div>\n            <div class="section-page-content">\n                <main id="main" class="container">\n                    <div class="row">\n                        <div class="section-download-ticket-cont">\n                            <div class="section-download-ticket" >\n                                <div class="kenzap-container" style="max-width:1170px">\n                                    <noscript><img src="https://static.kenzap.com/layouts/event/download-ticket-img.png" alt="Download image"></noscript><img class=" lazyloaded" src="https://static.kenzap.com/layouts/event/download-ticket-img.png" data-src="https://static.kenzap.com/layouts/event/download-ticket-img.png" alt="Download image">\n                                    <p>').concat(a('Thank you for purchasing "%1$%2$%3$" ticket.',"<strong>",a(i.state.response.order.title),"</strong>"),"</p>\n                                    ").concat("1"==i.data.general_ticket.value?"\n                                        <p>".concat(a("You can download all tickets by clicking %1$Download%2$ button below.","<strong>","</strong>"),'</p>\n                                        <a target="_blank" class="primary-link download-ticket" href="').concat(o(i.getAPI()+"?cmd=view_ticket&ext_token=".concat(o(i.data.sid),"&trans_id=").concat(o(p("id")))),'">').concat(a("Download Your Ticket"),"</a>\n                                        "):"\n                                        ","\n                                </div>\n                            </div>\n                        </div>\n                        ").concat("1"==i.data.individual_ticket.value?'\n                            <div class="row">   \n                                <div class="section-download-ticket-multi">\n                                    <h4>'.concat(a("Download each ticket individually"),"</h4>\n                                    ").concat(i.state.response.order.checkout.holders.map((function(t,e){return'\n                                            <a target="_blank" href="'.concat(o(i.getAPI()+"?cmd=view_ticket&ext_token=".concat(o(i.data.sid),"&trans_id=").concat(o(p("id")),"&holder=").concat(o(e))),'" data-index="').concat(o(e),'" class="download-ticket">').concat(a("Download ticket #%1$",e+1),"</a>\n                                            ")})).join(),"\n                                </div>\n                            </div>\n                            "):"\n                            ","\n                    </div>\n                </main>\n            </div>"),(()=>{let t=document.querySelector(".loader");t&&(t.style.display="none")})()})),e(this,"listeners",(function(){i.state.firstLoad})),e(this,"viewTicket",(function(t){var e=i;if(t.preventDefault(),!document.querySelector(".download-ticket").dataset.loading){document.querySelector(".download-ticket").dataset.loading=!0;var n={order:{type:"view-ticket",trans_id:p("id")}};t.currentTarget.dataset.index&&(n.order.holder=t.currentTarget.dataset.index),fetch(i.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":u("locale")?u("locale"):"en","Kenzap-Sid":e.data.sid},body:JSON.stringify({query:n})}).then((function(t){return t.blob()})).then((function(t){if(document.querySelector(".download-ticket").dataset.loading="",t.size<100)t.text().then((function(t){JSON.parse(t).success}));else{var e=URL.createObjectURL(t);window.open(e,"_blank")}})).catch((function(t){r(t)}))}})),e(this,"cache",(function(){localStorage.setItem(i.id,JSON.stringify(i.state))})),e(this,"getAPI",(function(){return 0==window.location.host.indexOf("localhost")?"https://api.myticket-dev.app.kenzap.cloud/":"https://api.myticket.app.kenzap.cloud/"})),this.state={firstLoad:!0,html:"",data:{},ajaxQueue:0,limit:25,responseKey:[],modal:null,modalCont:null,editor:{}},this.data=n,this.html(),this.load()},d&&t(l.prototype,d),s&&t(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l);window.kZtMlO=h}();
