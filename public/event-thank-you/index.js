!function(){"use strict";function e(e,t){for(var o=0;o<t.length;o++){var a=t[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,n(a.key),a)}}function t(e,t,o){return(t=n(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const o=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),a=(e,...t)=>{if(0===(e=String(e)).length)return"";return((e,t,...n)=>{let o=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?o(e,n):o(t(window.i18n.state.locale.values[e]),n)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},i=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},r=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let o=n[e];for(;" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""};r("kenzap_api_key"),r("locale")&&r("locale"),(()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+i()+"/"+r("locale");t!=r("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let o="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),o=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+o+";path=/;domain=.kenzap.cloud"})("check",t,5)})(),r("kenzap_token"),i();const c=e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",i()),n.append("token",r("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)};var l,s,d,u=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),o=0;o<n.length;o++){for(var a=n[o];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""},p=function(e){var t=new URLSearchParams(window.location.search);return t.get(e)?t.get(e):""},h=(l=function e(n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"html",(function(){document.querySelector("#content").insertAdjacentHTML("beforeend",'\n        <section id="'.concat(o(i.data.id),'" class="kZtMlO ').concat(i.data.c.classes?o(i.data.c.classes):"",'" style="').concat(i.data.c.section,";").concat(i.data.borderstyle.value?"--borderStyle:"+i.data.borderstyle.value+"px;":"",'">\n            <div class="container" style="').concat(i.data.c.container,'">\n  \n\n            </div>\n        </section>\n        '))})),t(this,"load",(function(){var e=i;i.state.firstLoad&&(()=>{let e=document.querySelector(".loader");e&&(e.style.display="block")})(),fetch(i.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":u("locale")?u("locale"):"en","Kenzap-Sid":e.data.sid},body:JSON.stringify({query:{order:{type:"verify-order",trans_id:p("id")}}})}).then((function(e){return e.json()})).then((function(e){if(e.success)i.state.response=e,i.render(),i.listeners(),i.state.firstLoad=!1;else{if(401==e.code)return void(document.querySelector("#"+i.data.id+" .container").innerHTML="".concat(a("this order does not exist or already expired")));c(e)}})).catch((function(e){console.error("Error:",e)}))})),t(this,"render",(function(){document.querySelector("#"+i.data.id+" .container").innerHTML='\n\n            <div class="section-page-header">\n                <div class="container">\n                    <h1 class="entry-title">'.concat(a("Download Your Ticket"),'</h1>\n                </div>\n            </div>\n            <div class="section-page-content">\n                <main id="main" class="container">\n                    <div class="row">\n                        <div class="section-download-ticket-cont">\n                            <div class="section-download-ticket" >\n                                <div class="kenzap-container" style="max-width:1170px">\n                                    <noscript><img src="https://static.kenzap.com/layouts/event/download-ticket-img.png" alt="Download image"></noscript><img class=" lazyloaded" src="https://static.kenzap.com/layouts/event/download-ticket-img.png" data-src="https://static.kenzap.com/layouts/event/download-ticket-img.png" alt="Download image">\n                                    <p>').concat(a('Thanks for purchasing "%1$%2$%3$" ticket.',"<strong>",a(i.state.response.order.title),"</strong>"),"</p><p>").concat(a("You can directly download ticket by clicking %1$Download%2$ button below.","<strong>","</strong>"),'</p>\n                                    <a target="_blank" class="primary-link download-ticket" href="#">Download Your Ticket</a>\n                                </div>\n                            </div>\n                        </div>\n                        <div class="row">   \n                            <div class="section-download-ticket-multi">\n                                <h4>').concat(a("Or download each ticket individually"),"</h4>\n                                ").concat(i.state.response.order.checkout.holders.map((function(e,t){return'\n                                        <a target="_blank" href="#" data-index="'.concat(t,'" class="download-ticket">').concat(a("Download ticket #%1$",t+1),"</a>\n                                        ")})).join(),"\n                            </div>\n                        </div>\n                    </div>\n                </main>\n            </div>"),(()=>{let e=document.querySelector(".loader");e&&(e.style.display="none")})()})),t(this,"listeners",(function(){var e=i;e.state.firstLoad&&((e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("click",t,!0),n.addEventListener("click",t,!0)})(".download-ticket",e.viewTicket)})),t(this,"viewTicket",(function(e){var t=i;if(e.preventDefault(),!document.querySelector(".download-ticket").dataset.loading){document.querySelector(".download-ticket").dataset.loading=!0;var n={order:{type:"view-ticket",trans_id:p("id")}};e.currentTarget.dataset.index&&(n.order.holder=e.currentTarget.dataset.index),fetch(i.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":u("locale")?u("locale"):"en","Kenzap-Sid":t.data.sid},body:JSON.stringify({query:n})}).then((function(e){return e.blob()})).then((function(e){if(document.querySelector(".download-ticket").dataset.loading="",e.size<100)e.text().then((function(e){JSON.parse(e).success}));else{var t=URL.createObjectURL(e);window.open(t)}})).catch((function(e){c(e)}))}})),t(this,"cache",(function(){localStorage.setItem(i.id,JSON.stringify(i.state))})),t(this,"getAPI",(function(){return 0==window.location.host.indexOf("localhost")?"https://api.myticket-dev.app.kenzap.cloud/":"https://api.myticket.app.kenzap.cloud/"})),this.state={firstLoad:!0,html:"",data:{},ajaxQueue:0,limit:25,responseKey:[],modal:null,modalCont:null,editor:{}},this.data=n,this.html(),this.load()},s&&e(l.prototype,s),d&&e(l,d),Object.defineProperty(l,"prototype",{writable:!1}),l);window.kZtMlO=h}();
