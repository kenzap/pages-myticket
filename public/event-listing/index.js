!function(){"use strict";function e(e,a){for(var n=0;n<a.length;n++){var r=a[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,t(r.key),r)}}function a(e,a,n){return(a=t(a))in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function t(e){var a=function(e,a){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,a||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}(e,"string");return"symbol"==typeof a?a:String(a)}const n=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),r=(e,...a)=>{if(0===(e=String(e)).length)return"";return((e,a,...t)=>{let n=(e,a)=>(a.forEach(((a,t)=>{e=e.replace("%"+(t+1)+"$",a)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?n(e,t):n(a(window.i18n.state.locale.values[e]),t)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...a)},o=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},c=e=>{let a=e+"=",t=decodeURIComponent(document.cookie).split(";");for(let e=0;e<t.length;e++){let n=t[e];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(a))return n.substring(a.length,n.length)}return""};c("kenzap_api_key"),c("locale")&&c("locale"),(()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,a=window.location.hostname+"/"+o()+"/"+c("locale");a!=c("check")&&(e=0,console.log("refresh")),((e,a,t)=>{let n="";if(t){let e=new Date;e.setTime(e.getTime()+24*t*60*60*1e3),n=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(a)||"")+n+";path=/;domain=.kenzap.cloud"})("check",a,5)})(),c("kenzap_token"),o();var l,i,s,d=function(e){for(var a=e+"=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(a))return r.substring(a.length,r.length)}return""},p=function(e,a){a=function(e){return e=e||0,e=parseFloat(e),Math.round(100*e)/100}(a),a=(Math.round(100*parseFloat(a))/100).toFixed(2);var t={};switch((t=e.currency_symb_loc?e:e.settings).currency_symb_loc){case"left":a=t.currency_symb+" "+a;break;case"right":a+=t.currency_symb}return a},u=(l=function e(t){var l=this;!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"html",(function(){document.querySelector("#content").insertAdjacentHTML("beforeend",'\n        <section id="'.concat(n(l.data.id),'" class="kibGiH ').concat(l.data.c.classes?n(l.data.c.classes):"",'" style="').concat(l.data.c.section,";").concat(l.data.borderstyle.value?"--borderStyle:"+l.data.borderstyle.value+"px;":"",'">\n            <div class="container" style="').concat(l.data.c.container,'">\n  \n            </div>\n        </section>\n        '))})),a(this,"load",(function(){var e=l;fetch(l.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":d("locale")?d("locale"):"en","Kenzap-Sid":e.data.sid},body:JSON.stringify({query:{locale:{type:"locale",id:d("lang")},events:{type:"get-events",category:e.data.category.value?e.data.category.value:""}}})}).then((function(e){return e.json()})).then((function(a){a.success?(e.response=a,e.render(),e.listeners(),e.firstLoad=!1):(400==a.code&&(document.querySelector("#"+l.data.id+" .container").innerHTML='\n                    <div class="related-posts" style=" ">\n                        <div class="posts-">\n                            '.concat(r("No events found")," \n                        </div>\n                    </div>\n                ")),a.code>400&&(e=>{if(console.log(e),isNaN(e.code)){let a=e;try{a=JSON.stringify(a)}catch(e){}let t=new URLSearchParams;return t.append("cmd","report"),t.append("sid",o()),t.append("token",c("kenzap_token")),t.append("data",a),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:t}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)})(a))})).catch((function(e){console.error("Error:",e)}))})),a(this,"render",(function(){document.querySelector("#"+l.data.id+" .container").innerHTML="\n            ".concat(l.data.header.value,'\n            <div class="related-posts" style=" ">\n                <div class="posts">\n\n                    ').concat(l.response.events.data.map((function(e,a){return'\n                            <article class="card">\n                                <div class="holder">\n                                    <div class="img-area">\n                                        <a href="/event/?id='.concat(e._id,'">').concat(l.img(e),'</a>\n                                    </div>\n                                    <div class="card-body">\n                                        <h3><a href="/event/?id=').concat(e._id,'">').concat(e.title,'</a></h3>\n                                        <strong class="sub-heading">').concat(e.vendor.name?e.vendor.name:"",'</strong>\n                                        <div class="card-footer">\n                                            <span class="price">').concat(l.price(e),'</span>\n                                            <div class="rating-area">\n                                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#6c757d" class="bi bi-calendar2-date ms-2 text-dark" viewBox="0 0 16 16">\n                                                    <path d="M6.445 12.688V7.354h-.633A12.6 12.6 0 0 0 4.5 8.16v.695c.375-.257.969-.62 1.258-.777h.012v4.61h.675zm1.188-1.305c.047.64.594 1.406 1.703 1.406 1.258 0 2-1.066 2-2.871 0-1.934-.781-2.668-1.953-2.668-.926 0-1.797.672-1.797 1.809 0 1.16.824 1.77 1.676 1.77.746 0 1.23-.376 1.383-.79h.027c-.004 1.316-.461 2.164-1.305 2.164-.664 0-1.008-.45-1.05-.82h-.684zm2.953-2.317c0 .696-.559 1.18-1.184 1.18-.601 0-1.144-.383-1.144-1.2 0-.823.582-1.21 1.168-1.21.633 0 1.16.398 1.16 1.23z"></path>\n                                                    <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"></path>\n                                                    <path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4z"></path>\n                                                </svg>\n                                                <div>').concat(new Date(e.eventbegins).toLocaleDateString(),"</div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </article>\n                            ")})).join(""),"\n\n                </div>\n            </div>\n        ")})),a(this,"listeners",(function(){})),a(this,"img",(function(e){return e.img[0]?'<img src="'.concat("https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com/S"+e.sid+"/event-"+e._id+"-1-250.jpeg?"+e.updated,' }" alt="').concat(n(e.title),'"></img>'):'<img src="https://cdn.kenzap.com/loading.png" alt="Placeholder image"></img>'})),a(this,"stars",(function(e,a){var t="";return t+='        <fieldset class="rating">            <input type="radio" name="'+e+'rrr" '+((a=parseFloat(a))>4.5&&a<=5?"checked":"")+' value="5"><label class="full" for="star5" ></label>            <input type="radio" name="'+e+'rrr" '+(a>4&&a<=4.5?"checked":"")+' value="4 and a half"><label class="half" for="star4half" ></label>            <input type="radio" name="'+e+'rrr" '+(a>3.5&&a<=4?"checked":"")+' value="4"><label class="full" for="star4" ></label>            <input type="radio" name="'+e+'rrr" '+(a>3&&a<=3.5?"checked":"")+' value="3 and a half"><label class="half" for="star3half" ></label>            <input type="radio" name="'+e+'rrr" '+(a>2.5&&a<=3?"checked":"")+' value="3"><label class="full" for="star3" ></label>            <input type="radio" name="'+e+'rrr" '+(a>2&&a<=2.5?"checked":"")+' value="2 and a half"><label class="half" for="star2half" ></label>            <input type="radio" name="'+e+'rrr" '+(a>1.5&&a<=2?"checked":"")+' value="2"><label class="full" for="star2" ></label>            <input type="radio" name="'+e+'rrr" '+(a>1&&a<=1.5?"checked":"")+' value="1 and a half"><label class="half" for="star1half" ></label>            <input type="radio" name="'+e+'rrr" '+(a>.5&&a<=1?"checked":"")+' value="1"><label class="full" for="star1" ></label>            <input type="radio" name="'+e+'rrr" '+(a>0&&a<=.5?"checked":"")+' value="half"><label class="half" for="starhalf" ></label>        </fieldset>        '})),a(this,"price",(function(e){var a=999999999999999;return e.variations.forEach((function(e,t){parseFloat(e.price)<a&&(a=parseFloat(e.price))})),999999999999999==a&&(a=0),p(e.settings,a)})),a(this,"getAPI",(function(){return 0==window.location.host.indexOf("localhost")?"https://api.myticket-dev.app.kenzap.cloud/":"https://api.myticket.app.kenzap.cloud/"})),this.data=t,this.html(),this.load()},i&&e(l.prototype,i),s&&e(l,s),Object.defineProperty(l,"prototype",{writable:!1}),l);window.kibGiH=u}();
