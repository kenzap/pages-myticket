!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,r(a.key),a)}}function t(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function r(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const o=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),i=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),c=(e,...t)=>{if(0===(e=String(e)).length)return"";return((e,t,...n)=>{let a=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?a(e,n):a(t(window.i18n.state.locale.values[e]),n)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},s=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},l=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let a=n[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""};l("kenzap_api_key"),l("locale")&&l("locale"),(()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+s()+"/"+l("locale");t!=l("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+a+";path=/;domain=.kenzap.cloud"})("check",t,5)})(),l("kenzap_token"),s();var d,u,p,v=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""},h=(d=function e(a){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"html",(function(){document.querySelector("#content").insertAdjacentHTML("beforeend",'\n        <section id="'.concat(o(r.data.id),'" class="kle3pt ').concat(r.data.c.classes?o(r.data.c.classes):"",'" style="\n            ').concat(r.data.c.section,";\n            ").concat(r.data.borderstyle.value?"--borderStyle:"+r.data.borderstyle.value+"px;":"",";\n            ").concat(r.data.borderstyle.value?"--borderStyleLess:"+(parseInt(r.data.borderstyle.value)>24?24:r.data.borderstyle.value)+"px;":"",';\n            ">\n            <div class="container" style="').concat(r.data.c.container,'">\n  \n            </div>\n        </section>\n        '))})),t(this,"load",(function(){var e=r;fetch(r.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":v("locale")?v("locale"):"en","Kenzap-Sid":e.data.sid},body:JSON.stringify({query:{locale:{type:"locale",id:v("lang")},events:{type:"get-events",category:e.data.category.value?e.data.category.value:"",detailed:1,limit:20,dates:1,filter_date:r.year?r.year+"-"+(1==r.month.length?"0"+(parseInt(r.month)+1):parseInt(r.month)+1):""}}})}).then((function(e){return e.json()})).then((function(t){t.success?(e.response=t,e.render(),e.firstLoad=!1):(400==t.code&&(document.querySelector("#"+r.data.id+" .container").innerHTML='\n                    <div class="kp-content" style=" ">\n                        <div class="posts-">\n                            '.concat(c("No events found")," \n                        </div>\n                    </div>\n                ")),t.code>400&&(e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",s()),n.append("token",l("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)})(t))})).catch((function(e){console.error("Error:",e)}))})),t(this,"render",(function(){var e=r,t=[c("January"),c("February"),c("March"),c("April"),c("May"),c("June"),c("July"),c("August"),c("September"),c("October"),c("November"),c("December")];console.log(r.response.events);var n,a={};r.response.events.dates&&r.response.events.dates.forEach((function(e){var t=new Date(e),n=t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate();a[n]||(a[n]=[]),a[n].push(e),a[n].sort()})),""==e.date&&(e.date=Object.keys(a)[0]),""==e._id&&r.response.events.data.map((function(t,n){""==e._id&&e.date==new Date(t.eventbegins).getFullYear()+"-"+new Date(t.eventbegins).getMonth()+"-"+new Date(t.eventbegins).getDate()&&(e._id=t._id)})),document.querySelector("#"+r.data.id+" .container").innerHTML='\n            <div class="row">\n                <div class="section-header">\n                    '.concat(r.data.header.value,'\n                    <span class="todays-date">\n                        <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" fill="currentColor" class="bi bi-calendar2-week" viewBox="0 0 16 16"><path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM2 2a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H2z"/><path d="M2.5 4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5H3a.5.5 0 0 1-.5-.5V4zM11 7.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm-5 3a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1zm3 0a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/></svg>\n                        <div><strong>').concat(t[new Date(r.response.events.data[0].eventbegins).getMonth()],"</strong> ").concat(new Date(r.response.events.data[0].eventbegins).getFullYear(),'</div>\n                    </span>\n                </div>\n                <div class="section-content scroll-wrapper">\n                    <ul class="clearfix">\n\n                        ').concat(r.response.events.data.map((function(e,t){return t<4?'\n                                <li class="event-'.concat(t,'">\n                                    <span class="event-time">').concat(new Date(e.eventbegins).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).substr(0,5)," <strong>").concat(8==new Date(e.eventbegins).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).length?new Date(e.eventbegins).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}).substr(6,2):"",'</strong></span>\n                                    <strong class="event-name">').concat(e.title,'</strong>\n                                    <a href="').concat(function(e){return void 0===e.variations[0]?"/event/?id=".concat(e._id):"true"==e.variations[0].layout?"/hall/?id=".concat(e._id):"/event/?id=".concat(e._id)}(e),'" class="get-ticket">').concat(i(r.data.ctatext.value),"</a>\n                                </li>\n                                "):""})).join(""),'\n                    </ul>\n                    <strong class="event-list-label"><a href="').concat((n=r.data.ctalink.value,0===(n=String(n)).length?"":n.replace(/[<>'"]/g,(e=>({"<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),'" class="cal-link">').concat(i(r.data.ctalinktext.value),"</a></strong>\n                </div>\n            </div>\n        "),r.response.events.data.length||document.querySelector("#"+r.data.id+" .container .kp-content")&&(document.querySelector("#"+r.data.id+" .container .kp-content").innerHTML='\n                <div class="kp-content" style=" ">\n                    <div class="posts-">\n                        '.concat(c("No events found")," \n                    </div>\n                </div>\n            ")),r.listeners()})),t(this,"listeners",(function(){var e=r,t=function(){n(document.querySelectorAll("#"+o(r.data.id)+" ul.event-tabs li")).forEach((function(e){e.classList.remove("active")})),n(document.querySelectorAll("#"+o(r.data.id)+" .schedule-tabs li")).forEach((function(e){e.classList.remove("active")}))};n(document.querySelectorAll(".event-tabs li a")).forEach((function(n){n.addEventListener("click",(function(n){n.preventDefault(),t(),n.currentTarget.parentElement.classList.add("active");var a=n.currentTarget.getAttribute("href");e.date=a.replace("#tab-",""),e._id="",e.load()}))})),n(document.querySelectorAll(".schedule-tabs li")).forEach((function(n){n.addEventListener("click",(function(n){n.preventDefault(),t(),n.currentTarget.classList.add("active"),e._id=n.currentTarget.dataset._id,e.render()}))}))})),t(this,"img",(function(e){return e.img[0]?'<div class="kp-img" style="background-image:url('.concat("https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com/S"+e.sid+"/event-"+e._id+"-1-500.webp?"+e.updated,');"></div>'):'<div class="kp-img" style="background-image:url(https://cdn.kenzap.com/loading.png);"></div>'})),t(this,"ticketsLeft",(function(e){var t=0;return e.variations.forEach((function(e){t=(e.stock?parseInt(e.stock):0)-(e.booked?parseInt(e.booked):0)})),c("%1$ tickets left",t)})),t(this,"getAPI",(function(){return 0==window.location.host.indexOf("localhost")?"https://api.myticket-dev.app.kenzap.cloud/":"https://api.myticket.app.kenzap.cloud/"})),this._id="",this.date="",this.data=a,this.html(),this.load()},u&&e(d.prototype,u),p&&e(d,p),Object.defineProperty(d,"prototype",{writable:!1}),d);window.kle3pt=h}();
