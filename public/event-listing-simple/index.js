!function(){"use strict";function e(e,t){for(var a=0;a<t.length;a++){var o=t[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,n(o.key),o)}}function t(e,t,a){return(t=n(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function n(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}const a=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),o=e=>0===(e=String(e)).length?"":e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e]))),r=(e,...t)=>{if(0===(e=String(e)).length)return"";return((e,t,...n)=>{let a=(e,t)=>(t.forEach(((t,n)=>{e=e.replace("%"+(n+1)+"$",t)})),e);return void 0===window.i18n||void 0===window.i18n.state.locale.values[e]?a(e,n):a(t(window.i18n.state.locale.values[e]),n)})(e,(e=>e.replace(/[&<>'"]/g,(e=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&apos;",'"':"&quot;"}[e])))),...t)},c=()=>{let e=new URLSearchParams(window.location.search);return e.get("sid")?e.get("sid"):""},l=e=>{let t=e+"=",n=decodeURIComponent(document.cookie).split(";");for(let e=0;e<n.length;e++){let a=n[e];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(t))return a.substring(t.length,a.length)}return""};l("kenzap_api_key"),l("locale")&&l("locale"),(()=>{let e=localStorage.hasOwnProperty("header")&&localStorage.hasOwnProperty("header-version")?localStorage.getItem("header-version"):0,t=window.location.hostname+"/"+c()+"/"+l("locale");t!=l("check")&&(e=0,console.log("refresh")),((e,t,n)=>{let a="";if(n){let e=new Date;e.setTime(e.getTime()+24*n*60*60*1e3),a=";expires="+e.toUTCString()}document.cookie=e+"="+(escape(t)||"")+a+";path=/;domain=.kenzap.cloud"})("check",t,5)})(),l("kenzap_token"),c();var s,i,d,p=function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),a=0;a<n.length;a++){for(var o=n[a];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},u=function(e,t){t=function(e){return e=e||0,e=parseFloat(e),Math.round(100*e)/100}(t),t=(Math.round(100*parseFloat(t))/100).toFixed(2);var n={};switch((n=e.currency_symb_loc?e:e.settings).currency_symb_loc){case"left":t=n.currency_symb+" "+t;break;case"right":t+=n.currency_symb}return t},h=(s=function e(n){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t(this,"html",(function(){document.querySelector("#content").insertAdjacentHTML("beforeend",'\n        <section id="'.concat(a(s.data.id),'" class="kBC5GW ').concat(s.data.c.classes?a(s.data.c.classes):"",'" style="\n            ').concat(s.data.c.section,";\n            ").concat(s.data.borderstyle.value?"--borderStyle:"+s.data.borderstyle.value+"px;":"",";\n            ").concat(s.data.borderstyle.value?"--borderStyleLess:"+(parseInt(s.data.borderstyle.value)>24?24:s.data.borderstyle.value)+"px;":"",';\n            ">\n            <div class="container" style="').concat(s.data.c.container,'">\n  \n            </div>\n        </section>\n        '))})),t(this,"load",(function(){var e=s;void 0===s.month&&(s.month="1"),fetch(s.getAPI(),{method:"post",headers:{Accept:"application/json","Content-Type":"application/json","Kenzap-Locale":p("locale")?p("locale"):"en","Kenzap-Sid":e.data.sid},body:JSON.stringify({query:{locale:{type:"locale",id:p("lang")},events:{type:"get-events",category:e.data.category.value?e.data.category.value:"",detailed:1,limit:20,dates:1,filter_date:e.year?e.year+"-"+(parseInt(e.month)<9?"0"+(parseInt(e.month)+1):parseInt(e.month)+1):""}}})}).then((function(e){return e.json()})).then((function(t){t.success?(e.response=t,e.render(),e.firstLoad=!1):(400==t.code&&(document.querySelector("#"+s.data.id+" .container").innerHTML='\n                    <div class="kp-content" style=" ">\n                        <div class="posts-">\n                            '.concat(r("No events found")," \n                        </div>\n                    </div>\n                ")),t.code>400&&(e=>{if(console.log(e),isNaN(e.code)){let t=e;try{t=JSON.stringify(t)}catch(e){}let n=new URLSearchParams;return n.append("cmd","report"),n.append("sid",c()),n.append("token",l("kenzap_token")),n.append("data",t),fetch("https://api-v1.kenzap.cloud/error/",{method:"post",headers:{Accept:"application/json","Content-type":"application/x-www-form-urlencoded"},body:n}),void alert("Can not connect to Kenzap Cloud")}if(401===e.code){if(-1!=window.location.href.indexOf("localhost"))return void alert(e.reason);location.href="https://auth.kenzap.com/?app=65432108792785&redirect="+window.location.href}else alert(e.reason)})(t))})).catch((function(e){console.error("Error:",e)}))})),t(this,"render",(function(){console.log(s.response);var e=[r("January"),r("February"),r("March"),r("April"),r("May"),r("June"),r("July"),r("August"),r("September"),r("October"),r("November"),r("December")],t={};s.response.events.dates&&s.response.events.dates.forEach((function(e){var n=new Date(e);t[n.getFullYear()]||(t[n.getFullYear()]=[]),t[n.getFullYear()].includes(n.getMonth())||t[n.getFullYear()].push(n.getMonth()),t[n.getFullYear()].sort()})),s.year||(s.year=Object.keys(t)[0]),document.querySelector("#"+s.data.id+" .container").innerHTML="\n            ".concat(s.data.header.value,'\n            <div class="kp-header">\n                <div class="event-filter">\n                    <div class="kenzap-row">\n                        <div class="kenzap-col-6">\n                            <p>').concat(r("Select Month"),'</p>\n                            <select class="selectpicker" data-type="month">\n                                ').concat(t[s.year]?t[s.year].map((function(t){return'\n                                            <option value="'.concat(t,'" ').concat(s.month==t?"selected":"",">").concat(e[t],"</option>\n                                        ")})).join(""):"<option>".concat(r("select month"),"</option>"),'\n                            </select>\n                        </div>\n                        <div class="kenzap-col-6">\n                            <p>').concat(r("Select Year"),'</p>\n                            <select class="selectpicker" data-type="year">\n                                ').concat(Object.keys(t).map((function(e){return'\n                                            <option value="'.concat(e,'" ').concat(s.year==e?"selected":"",">").concat(e,"</option>\n                                        ")})).join(""),'\n                            </select>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class="kp-content">\n                ').concat(s.response.events.data.map((function(t,n){return'\n                        <div class="event-box">\n                            <div class="event-date">\n                                <div class="post-date">\n                                    <span class="day">'.concat(new Date(t.eventbegins).getDay(),'</span>\n                                    <span class="month">').concat(e[new Date(t.eventbegins).getMonth()].substr(0,3),'</span>\n                                    <span class="year">').concat(new Date(t.eventbegins).getFullYear(),'</span>\n                                </div>\n                            </div>\n                            <div class="event-content">\n                                <h3><a href="/event/?id=').concat(t._id,'">').concat(o(t.title),"</a></h3>\n                                <p>").concat(o(t.sdesc),'</p>\n                                <div class="location">\n                                    <span>\n                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" class="bi bi-pin-map-fill" viewBox="0 0 16 16">\n                                            <path fill-rule="evenodd" d="M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"/>\n                                            <path fill-rule="evenodd" d="M4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"/>\n                                        </svg>\n                                        ').concat(t.eventlocation,'\n                                    </span><a target="_blank" href="http://maps.google.com/?q=').concat(encodeURIComponent(t.eventlocation),'">').concat(o(s.data.ctamaptext.value),'</a> \n                                </div>\n                            </div>\n                            <div class="event-action">\n                                <a href="/event/?id=').concat(t._id,'" class="join-now">').concat(o(s.data.ctatext.value),"</a>\n                            </div>\n                        </div>\n                        ")})).join(""),"\n            </div>\n        "),s.response.events.data.length||document.querySelector("#"+s.data.id+" .container .kp-content")&&(document.querySelector("#"+s.data.id+" .container .kp-content").innerHTML='\n                <div class="kp-content" style=" ">\n                    <div class="posts-">\n                        '.concat(r("No events found")," \n                    </div>\n                </div>\n            ")),s.listeners()})),t(this,"listeners",(function(){var e=s;((e,t)=>{if(document.querySelector(e))for(let n of document.querySelectorAll(e))n.removeEventListener("change",t,!0),n.addEventListener("change",t,!0)})(".selectpicker",(function(t){switch(t.currentTarget.dataset.type){case"year":e.year=t.currentTarget.value;break;case"month":e.month=t.currentTarget.value}console.log(t.currentTarget.value),e.load()}))})),t(this,"img",(function(e){return e.img[0]?'<img src="'.concat("https://kenzap-sites.oss-ap-southeast-1.aliyuncs.com/S"+e.sid+"/event-"+e._id+"-1-250.webp?"+e.updated,' }" alt="').concat(a(e.title),'"></img>'):'<img src="https://cdn.kenzap.com/loading.png" alt="Placeholder image"></img>'})),t(this,"stars",(function(e,t){var n="";return n+='        <fieldset class="rating">            <input type="radio" name="'+e+'rrr" '+((t=parseFloat(t))>4.5&&t<=5?"checked":"")+' value="5"><label class="full" for="star5" ></label>            <input type="radio" name="'+e+'rrr" '+(t>4&&t<=4.5?"checked":"")+' value="4 and a half"><label class="half" for="star4half" ></label>            <input type="radio" name="'+e+'rrr" '+(t>3.5&&t<=4?"checked":"")+' value="4"><label class="full" for="star4" ></label>            <input type="radio" name="'+e+'rrr" '+(t>3&&t<=3.5?"checked":"")+' value="3 and a half"><label class="half" for="star3half" ></label>            <input type="radio" name="'+e+'rrr" '+(t>2.5&&t<=3?"checked":"")+' value="3"><label class="full" for="star3" ></label>            <input type="radio" name="'+e+'rrr" '+(t>2&&t<=2.5?"checked":"")+' value="2 and a half"><label class="half" for="star2half" ></label>            <input type="radio" name="'+e+'rrr" '+(t>1.5&&t<=2?"checked":"")+' value="2"><label class="full" for="star2" ></label>            <input type="radio" name="'+e+'rrr" '+(t>1&&t<=1.5?"checked":"")+' value="1 and a half"><label class="half" for="star1half" ></label>            <input type="radio" name="'+e+'rrr" '+(t>.5&&t<=1?"checked":"")+' value="1"><label class="full" for="star1" ></label>            <input type="radio" name="'+e+'rrr" '+(t>0&&t<=.5?"checked":"")+' value="half"><label class="half" for="starhalf" ></label>        </fieldset>        '})),t(this,"price",(function(e){var t=999999999999999;return e.variations.forEach((function(e,n){parseFloat(e.price)<t&&(t=parseFloat(e.price))})),999999999999999==t&&(t=0),u(e.settings,t)})),t(this,"getAPI",(function(){return 0==window.location.host.indexOf("localhost")?"https://api.myticket-dev.app.kenzap.cloud/":"https://api.myticket.app.kenzap.cloud/"})),this.data=n,this.html(),this.load()},i&&e(s.prototype,i),d&&e(s,d),Object.defineProperty(s,"prototype",{writable:!1}),s);window.kBC5GW=h}();
